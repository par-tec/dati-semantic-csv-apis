---
- id: create_currency
  marks:
  - slow
  description: |-
    Given:
    - a TTL file
    - a JSON-LD frame
    When:
    - I run the `jsonld create` command
    Then:
    - the command exits successfully
    - the output JSON-LD file contains 179 items
  steps:
  - command:
    - jsonld
    - create
    - --ttl
    - data/currency.ttl
    - --frame
    - data/currency.frame.yamlld
    - --vocabulary-uri
    - http://publications.europa.eu/resource/authority/currency
    - --batch-size
    - "0"
    - --frame-only
    expected:
      logs:
      - >-
        Dataset contains 286 items, processing without batching
      - >-
        Batched framing completed, total items: 179

- id: create_ateco-2025
  marks:
  - asset
  description: |-
    Given:
    - the ateco-2025 TTL file
    - a JSON-LD frame
    When:
    - I run the `jsonld create` command
    Then:
    - the command exits successfully
    - the output JSON-LD file contains 3257 items
  steps:
  - command:
    - jsonld
    - create
    - --ttl
    - ../assets/controlled-vocabularies/ateco-2025/ateco-2025.ttl
    - --frame
    - ../assets/controlled-vocabularies/ateco-2025/ateco-2025.frame.yamlld
    - --vocabulary-uri
    - https://w3id.org/italia/stat/controlled-vocabulary/economy/ateco-2025
    - --batch-size
    - "1000"
    - --frame-only
    expected:
      logs:
      - >-
        Dataset contains 3345 items, processing in batches of
        1000
      - >-
        Batched framing completed, total items: 3257

- id: validate_currency
  marks:
  - slow
  description: |-
    Given:
    - a currency TTL file
    - a previously created JSON-LD snapshot
    When:
    - I run the `jsonld validate` command
    Then:
    - the command exits successfully
    - validation passes
  steps:
  - command:
    - jsonld
    - validate
    - --ttl
    - data/currency.ttl
    - --vocabulary-uri
    - http://publications.europa.eu/resource/authority/currency
